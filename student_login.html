<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö—ñ–¥ –°—Ç—É–¥–µ–Ω—Ç–∞ | SSRM</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Page-specific styles */
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-xl) var(--spacing-lg);
        }

        .login-container {
            width: 100%;
            max-width: 700px;
            animation: fadeInUp 0.8s ease-out;
        }

        .page-header {
            text-align: center;
            margin-bottom: var(--spacing-2xl);
        }

        .page-title {
            color: var(--white);
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-extrabold);
            margin-bottom: var(--spacing-md);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .page-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: var(--font-size-lg);
        }

        .step-card {
            background: var(--white);
            border-radius: var(--radius-2xl);
            padding: var(--spacing-2xl);
            box-shadow: var(--shadow-2xl);
            margin-bottom: var(--spacing-xl);
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            padding-bottom: var(--spacing-lg);
            border-bottom: 2px solid var(--gray-200);
        }

        .step-number {
            width: 50px;
            height: 50px;
            background: var(--primary-gradient);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            flex-shrink: 0;
        }

        .step-title {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--gray-900);
            margin: 0;
        }

        .step-description {
            color: var(--gray-600);
            margin-bottom: var(--spacing-xl);
            line-height: 1.6;
        }

        .setup-section {
            display: none;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-lg);
        }

        .verification-message,
        .setup-message {
            margin-top: var(--spacing-lg);
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            font-weight: var(--font-weight-medium);
            text-align: center;
        }

        .checkbox-card {
            background: var(--gray-50);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            border: 2px solid var(--gray-200);
            transition: all var(--transition-base);
        }

        .checkbox-card:has(input:checked) {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.05);
        }

        .restriction-details {
            display: none;
            margin-top: var(--spacing-lg);
            padding: var(--spacing-lg);
            background: var(--warning-light);
            border-radius: var(--radius-md);
            border-left: 4px solid var(--warning-color);
        }

        .restriction-details.show {
            display: block;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn-submit {
            position: relative;
            overflow: hidden;
        }

        .btn-submit::after {
            content: '‚Üí';
            position: absolute;
            right: 20px;
            transition: transform var(--transition-base);
        }

        .btn-submit:hover::after {
            transform: translateX(5px);
        }

        @media (max-width: 768px) {
            .page-title {
                font-size: var(--font-size-2xl);
            }

            .step-card {
                padding: var(--spacing-xl);
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">S</div>
                <span>SSRM</span>
            </a>
            <nav class="nav-controls">
                <div class="language-switcher">
                    <button class="lang-btn active" data-lang="uk">üá∫üá¶ –£–ö–†</button>
                    <button class="lang-btn" data-lang="en">üá¨üáß ENG</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="login-container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title" data-translate="student-login-title">
                    –í—Ö—ñ–¥ —Ç–∞ –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –ü—Ä–æ—Ñ—ñ–ª—é
                </h1>
                <p class="page-subtitle"  data-translate="page-subtitle-student">
                    üéì –®–≤–∏–¥–∫–∏–π —Ç–∞ –±–µ–∑–ø–µ—á–Ω–∏–π —Å–ø–æ—Å—ñ–± –∑–¥–∞—Ç–∏ –∑–∞–ª—ñ–∫ –æ–Ω–ª–∞–π–Ω
                </p>
            </div>

            <!-- Step 1: Verification -->
            <div id="verificationSection" class="step-card">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <div>
                        <h2 class="step-title" data-translate="step1-title">
                            –ö—Ä–æ–∫ 1: –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (–ö–æ–¥ –í–ù–ó)
                        </h2>
                    </div>
                </div>

                <p class="step-description" data-translate="step1-description">
                    –î–ª—è –ø–µ—Ä–≤–∏–Ω–Ω–æ–≥–æ –≤—Ö–æ–¥—É –∑–Ω–∞–π–¥—ñ—Ç—å —Å–µ–±–µ —É —Å–ø–∏—Å–∫—É —Ç–∞ –≤–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó, –æ—Ç—Ä–∏–º–∞–Ω–∏–π —É –¥–µ–∫–∞–Ω–∞—Ç—ñ.
                </p>

                <form id="verificationForm">
                    <div class="form-group">
                        <label for="studentSelect" class="form-label" data-translate="your-name">
                            –í–∞—à–µ –ü—Ä—ñ–∑–≤–∏—â–µ —Ç–∞ –Ü–º'—è:
                        </label>
                        <select class="form-control form-select" id="studentSelect" required>
                            <option value="" data-translate="select-yourself">–í–∏–±–µ—Ä—ñ—Ç—å —Å–µ–±–µ...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="universityCode" class="form-label" data-translate="activation-code">
                            –ö–æ–¥ –ê–∫—Ç–∏–≤–∞—Ü—ñ—ó –í–ù–ó:
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="universityCode" 
                            placeholder="ALPHA123"
                            required
                            style="text-transform: uppercase;">
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg btn-block btn-submit">
                        <span data-translate="verify-button">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–∞ –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏</span>
                    </button>

                    <div id="verificationMessage" class="verification-message"></div>
                </form>
            </div>

            <!-- Step 2: Profile Setup -->
            <div id="setupSection" class="step-card setup-section">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <div>
                        <h2 class="step-title" data-translate="step2-title">
                            –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ü—Ä–æ—Ñ—ñ–ª—é —Ç–∞ –ü–∞—Ä–æ–ª—è
                        </h2>
                    </div>
                </div>

                <form id="setupForm">
                    <!-- Email & Password -->
                    <div class="form-group">
                        <label for="userEmail" class="form-label" data-translate="your-email">
                            –í–∞—à–∞ –ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞ (–ª–æ–≥—ñ–Ω):
                        </label>
                        <input 
                            type="email" 
                            class="form-control" 
                            id="userEmail" 
                            placeholder="student@example.com"
                            required>
                    </div>

                    <div class="form-group">
                        <label for="userPassword" class="form-label" data-translate="your-password">
                            –ü–∞—Ä–æ–ª—å (–º—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤):
                        </label>
                        <input 
                            type="password" 
                            class="form-control" 
                            id="userPassword" 
                            minlength="6"
                            required>
                    </div>

                    <hr style="margin: var(--spacing-xl) 0;">

                    <!-- Physical Data -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="userAge" class="form-label" data-translate="age">
                                –í—ñ–∫ (—Ä–æ–∫—ñ–≤):
                            </label>
                            <input 
                                type="number" 
                                class="form-control" 
                                id="userAge" 
                                min="16"
                                max="100"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="userHeight" class="form-label" data-translate="height">
                                –ó—Ä—ñ—Å—Ç (—Å–º):
                            </label>
                            <input 
                                type="number" 
                                class="form-control" 
                                id="userHeight" 
                                min="140"
                                max="250"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="userWeight" class="form-label" data-translate="weight">
                                –í–∞–≥–∞ (–∫–≥):
                            </label>
                            <input 
                                type="number" 
                                class="form-control" 
                                id="userWeight" 
                                min="40"
                                max="200"
                                required>
                        </div>
                    </div>

                    <!-- Health Restrictions -->
                    <div class="checkbox-card">
                        <div class="form-check">
                            <input 
                                class="form-check-input" 
                                type="checkbox" 
                                id="healthRestriction">
                            <label class="form-check-label" for="healthRestriction" data-translate="health-restrictions">
                                –£ –º–µ–Ω–µ —î –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–∞ –∑–¥–æ—Ä–æ–≤'—è–º (–¥–æ–≤—ñ–¥–∫–∞).
                            </label>
                        </div>
                    </div>

                    <div id="restrictionDetails" class="restriction-details">
                        <label for="restrictionUpload" class="form-label" data-translate="upload-certificate">
                            –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–∫–∞–Ω –¥–æ–≤—ñ–¥–∫–∏ (JPG/PDF):
                        </label>
                        <input 
                            class="form-control" 
                            type="file" 
                            id="restrictionUpload" 
                            accept=".jpg,.jpeg,.png,.pdf">
                    </div>

                    <!-- Consent -->
                    <div class="checkbox-card" style="margin-top: var(--spacing-lg);">
                        <div class="form-check">
                            <input 
                                class="form-check-input" 
                                type="checkbox" 
                                id="consentCheck" 
                                required>
                            <label class="form-check-label" for="consentCheck" data-translate="consent">
                                –Ø –∑–≥–æ–¥–µ–Ω –∑ —É–º–æ–≤–∞–º–∏ –∑–¥–∞—á—ñ —Ç–µ—Å—Ç—É –æ–Ω–ª–∞–π–Ω.
                            </label>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg btn-block btn-submit" style="margin-top: var(--spacing-xl);">
                        <span data-translate="create-account">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ê–∫–∞—É–Ω—Ç —Ç–∞ –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</span>
                    </button>

                    <div id="setupMessage" class="setup-message"></div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">hai-guys.space</div>
            <p class="footer-text" data-translate="footer-text">
                –°—Ç–µ–∂—Ç–µ –∑–∞ –Ω–∞—à–∏–º–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏!
            </p>
        </div>
    </footer>

    <script src="main.js"></script>
    <script>
        // ========================================
// STUDENT LOGIN PAGE LOGIC (–í–ò–ü–†–ê–í–õ–ï–ù–û)
// ========================================

document.addEventListener('DOMContentLoaded', () => {
    // ‚úÖ –ö–†–ò–¢–ò–ß–ù–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø #1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—Ö–æ–¥—É
    if (SSRM.Auth.isAuthenticated() && SSRM.Auth.getCurrentUser().type === 'student') {
        // –Ø–∫—â–æ —Å—Ç—É–¥–µ–Ω—Ç –≤–∂–µ –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω–∏–π - —Ä–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ quest
        window.location.href = 'student_ultimate_quest.html';
        return;
    }

    // Populate student select dropdown
    populateStudentSelect();

    // Form handlers
    document.getElementById('verificationForm').addEventListener('submit', handleVerification);
    document.getElementById('setupForm').addEventListener('submit', handleSetup);

    // Health restriction toggle
    document.getElementById('healthRestriction').addEventListener('change', toggleRestrictionField);

    // ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø #2: –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –ø—Ä–∏ –∑–º—ñ–Ω—ñ –º–æ–≤–∏
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            setTimeout(() => {
                // –û—á–∏—â–∞—î–º–æ —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø–æ–≤–Ω—é—î–º–æ —Å–ø–∏—Å–æ–∫
                const select = document.getElementById('studentSelect');
                const currentValue = select.value; // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤–∏–±—ñ—Ä
                select.innerHTML = '<option value="" data-translate="select-yourself">–í–∏–±–µ—Ä—ñ—Ç—å —Å–µ–±–µ...</option>';
                populateStudentSelect();
                select.value = currentValue; // –í—ñ–¥–Ω–æ–≤–ª—é—î–º–æ –≤–∏–±—ñ—Ä
            }, 50);
        });
    });
});

// Populate student dropdown with mock data
function populateStudentSelect() {
    const select = document.getElementById('studentSelect');
    const currentLang = SSRM.langManager.getCurrentLanguage();
    
    SSRM.mockStudentData.forEach(student => {
        const option = document.createElement('option');
        option.value = student.id;
        option.textContent = currentLang === 'uk' ? student.name : student.nameEn;
        select.appendChild(option);
    });
}

// Toggle health restriction details
function toggleRestrictionField() {
    const checkbox = document.getElementById('healthRestriction');
    const details = document.getElementById('restrictionDetails');
    
    if (checkbox.checked) {
        details.classList.add('show');
    } else {
        details.classList.remove('show');
    }
}

// Handle Step 1: Verification
function handleVerification(event) {
    event.preventDefault();
    
    const studentId = document.getElementById('studentSelect').value;
    const universityCode = document.getElementById('universityCode').value.toUpperCase().trim();
    const messageDiv = document.getElementById('verificationMessage');
    const submitBtn = event.target.querySelector('button[type="submit"]');
    
    // Validation
    if (!studentId) {
        SSRM.toast.error('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–±–µ—Ä—ñ—Ç—å —Å–µ–±–µ –∑—ñ —Å–ø–∏—Å–∫—É');
        return;
    }
    
    if (!universityCode) {
        SSRM.toast.error('–í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó');
        return;
    }
    
    // ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø #3: –î–æ–¥–∞–Ω–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<span>‚è≥ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞...</span>';
    
    // –°–∏–º—É–ª—é—î–º–æ –∑–∞—Ç—Ä–∏–º–∫—É –∑–∞–ø–∏—Ç—É (–≤ —Ä–µ–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ - AJAX)
    setTimeout(() => {
        // Find student in mock data
        const selectedStudent = SSRM.mockStudentData.find(s => s.id === studentId);
        
        if (selectedStudent && selectedStudent.code === universityCode) {
            // SUCCESS!
            messageDiv.innerHTML = `<div class="alert alert-success" data-translate="code-correct">
                ‚úÖ –ö–æ–¥ –≤—ñ—Ä–Ω–∏–π! –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—É...
            </div>`;
            
            SSRM.toast.success(SSRM.langManager.translate('code-correct'));
            
            // Save student ID temporarily
            SSRM.Storage.set('pendingStudentId', studentId);
            
            // Show step 2 after delay
            setTimeout(() => {
                document.getElementById('verificationSection').style.display = 'none';
                document.getElementById('setupSection').style.display = 'block';
                
                // Smooth scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 1500);
            
        } else {
            // ERROR
            messageDiv.innerHTML = `<div class="alert alert-danger" data-translate="code-incorrect">
                ‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥ –∞–±–æ —Å—Ç—É–¥–µ–Ω—Ç. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–∞–Ω—ñ.
            </div>`;
            
            SSRM.toast.error(SSRM.langManager.translate('code-incorrect'));
            
            // ‚úÖ –í—ñ–¥–Ω–æ–≤–ª—é—î–º–æ –∫–Ω–æ–ø–∫—É
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<span data-translate="verify-button">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–∞ –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏</span>';
        }
    }, 800); // –ó–∞—Ç—Ä–∏–º–∫–∞ 800–º—Å
}

// Handle Step 2: Profile Setup
function handleSetup(event) {
    event.preventDefault();
    
    const email = document.getElementById('userEmail').value.trim();
    const password = document.getElementById('userPassword').value;
    const age = document.getElementById('userAge').value;
    const height = document.getElementById('userHeight').value;
    const weight = document.getElementById('userWeight').value;
    const hasRestriction = document.getElementById('healthRestriction').checked;
    const messageDiv = document.getElementById('setupMessage');
    const submitBtn = event.target.querySelector('button[type="submit"]');
    
    // Validation
    if (!SSRM.FormValidator.validateEmail(email)) {
        SSRM.toast.error('–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email');
        SSRM.FormValidator.showError(
            document.getElementById('userEmail'), 
            '–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email'
        );
        return;
    }
    
    if (!SSRM.FormValidator.validatePassword(password)) {
        SSRM.toast.error('–ü–∞—Ä–æ–ª—å –º–∞—î –±—É—Ç–∏ –º—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤');
        SSRM.FormValidator.showError(
            document.getElementById('userPassword'), 
            '–ú—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤'
        );
        return;
    }
    
    if (!SSRM.FormValidator.validateNumber(age, 16, 100)) {
        SSRM.toast.error('–í—ñ–∫ –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 16 –¥–æ 100 —Ä–æ–∫—ñ–≤');
        return;
    }
    
    if (!SSRM.FormValidator.validateNumber(height, 140, 250)) {
        SSRM.toast.error('–ó—Ä—ñ—Å—Ç –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 140 –¥–æ 250 —Å–º');
        return;
    }
    
    if (!SSRM.FormValidator.validateNumber(weight, 40, 200)) {
        SSRM.toast.error('–í–∞–≥–∞ –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 40 –¥–æ 200 –∫–≥');
        return;
    }
    
    // Clear any previous errors
    SSRM.FormValidator.clearError(document.getElementById('userEmail'));
    SSRM.FormValidator.clearError(document.getElementById('userPassword'));
    
    // ‚úÖ –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<span>‚è≥ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—É...</span>';
    
    // –°–∏–º—É–ª—é—î–º–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—É
    setTimeout(() => {
        // Get student data
        const studentId = SSRM.Storage.get('pendingStudentId');
        const student = SSRM.mockStudentData.find(s => s.id === studentId);
        
        if (!student) {
            SSRM.toast.error('–ü–æ–º–∏–ª–∫–∞: —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<span data-translate="create-account">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ê–∫–∞—É–Ω—Ç —Ç–∞ –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</span>';
            return;
        }
        
        // ‚úÖ –ö–†–ò–¢–ò–ß–ù–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø #4: –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ü–ê–†–û–õ–¨ —ñ –Ü–ú'–Ø
        const profile = {
            studentId: studentId,
            studentName: student.name, // ‚úÖ –î–æ–¥–∞–Ω–æ —ñ–º'—è
            email: email,
            password: password, // ‚úÖ –ö–†–ò–¢–ò–ß–ù–ï: –î–æ–¥–∞–Ω–æ –ø–∞—Ä–æ–ª—å
            age: parseInt(age),
            height: parseInt(height),
            weight: parseInt(weight),
            hasRestriction: hasRestriction,
            faculty: student.faculty,
            group: student.group,
            assignedInstructorId: student.assignedInstructorId,
            createdAt: new Date().toISOString()
        };
        
        // Save profile to localStorage
        SSRM.Storage.set('studentProfile', profile);
        
        // ‚úÖ –ö–†–ò–¢–ò–ß–ù–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø #5: –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Å–µ—Å—ñ—é
        SSRM.Auth.login(studentId, 'student');
        
        // –í–∏–¥–∞–ª—è—î–º–æ —Ç–∏–º—á–∞—Å–æ–≤–∏–π ID
        SSRM.Storage.remove('pendingStudentId');
        
        // Show success message
        messageDiv.innerHTML = `<div class="alert alert-success" data-translate="account-created">
            üéâ –ê–∫–∞—É–Ω—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ! –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ —Ç–µ—Å—Ç—É...
        </div>`;
        
        SSRM.toast.success(SSRM.langManager.translate('account-created'), 3000);
        
        // Redirect to quest page
        setTimeout(() => {
            window.location.href = 'student_ultimate_quest.html';
        }, 2000);
        
    }, 1000); // –ó–∞—Ç—Ä–∏–º–∫–∞ 1 —Å–µ–∫—É–Ω–¥–∞
}
    </script>
</body>
</html>
